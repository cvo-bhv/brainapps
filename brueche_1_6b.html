import React, { useState, useEffect } from 'react';
import { PieChart, Circle, MousePointer2, Check, X, ArrowRight, RotateCcw } from 'lucide-react';

// --- Styles ---
const GlobalStyles = () => (
    <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Nunito:wght@400;700&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f9ff;
            user-select: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        .handwritten {
            font-family: 'Comic Neue', cursive;
        }
        .fraction {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            font-size: 2.5rem;
            font-weight: bold;
        }
        .fraction .top {
            border-bottom: 4px solid black;
            display: block;
            padding: 0 5px;
        }
        .fraction .bottom {
            display: block;
            padding: 0 5px;
        }
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .animate-pop {
            animation: pop 0.3s ease-in-out;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    `}</style>
);

// --- Button Styles ---
const btnPrimaryClass = "bg-blue-600 text-white font-bold py-3 px-8 rounded-xl text-xl shadow-md transition-transform hover:scale-105 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2";
const btnSecondaryClass = "bg-white text-blue-600 border-2 border-blue-600 font-bold py-3 px-8 rounded-xl text-xl shadow-sm transition-transform hover:bg-blue-50 flex items-center gap-2";

// --- Helper: Pizza Component ---
const Pizza = ({ slices, activeIndices = [], onClickSlice, interactive = false, highlightColor = "#FF9F1C" }) => {
    const radius = 100;
    const center = 100;

    const getCoordinatesForPercent = (percent) => {
        const x = center + radius * Math.cos(2 * Math.PI * percent);
        const y = center + radius * Math.sin(2 * Math.PI * percent);
        return [x, y];
    };

    const paths = [];

    if (slices === 1) {
        paths.push(
            <circle 
                key={0} cx={center} cy={center} r={radius} 
                fill={activeIndices.includes(0) ? highlightColor : "#FFE0B2"} 
                stroke="white" strokeWidth="2"
                onClick={() => interactive && onClickSlice(0)}
                className={interactive ? "cursor-pointer hover:opacity-90" : ""}
            />
        );
    } else {
        for (let i = 0; i < slices; i++) {
            const startPercent = i / slices;
            const endPercent = (i + 1) / slices;
            const [startX, startY] = getCoordinatesForPercent(startPercent);
            const [endX, endY] = getCoordinatesForPercent(endPercent);
            
            const largeArcFlag = 0; 

            const pathData = [
                `M ${center} ${center}`,
                `L ${startX} ${startY}`,
                `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${endX} ${endY}`,
                `Z`
            ].join(' ');

            paths.push(
                <path
                    key={i} d={pathData}
                    fill={activeIndices.includes(i) ? highlightColor : "#FFE0B2"} 
                    stroke="white" strokeWidth="3"
                    onClick={() => interactive && onClickSlice(i)}
                    className={`transition-colors duration-200 ${interactive ? "cursor-pointer hover:opacity-80" : ""}`}
                />
            );
        }
    }

    return (
        <svg viewBox="0 0 200 200" className="w-64 h-64 drop-shadow-xl">
            {paths}
        </svg>
    );
};

// --- Helper: Fraction Component ---
const Fraction = ({ num, den, color = "black", scale = 1 }) => (
    <div className="fraction" style={{ color: color, transform: `scale(${scale})` }}>
        <span className="top">{num}</span>
        <span className="bottom">{den}</span>
    </div>
);

// --- SLIDE COMPONENTS ---

const Slide1 = () => (
    <div className="flex flex-col items-center justify-center h-full text-center space-y-8 animate-fade-in">
        <h1 className="text-6xl font-bold text-blue-600 handwritten">Br√ºche kennenlernen</h1>
        <div className="text-3xl text-gray-700">Wer hat Hunger?</div>
        <div className="transform hover:scale-105 transition-transform duration-500">
            <Pizza slices={1} activeIndices={[0]} highlightColor="#FF9F1C" />
        </div>
        <p className="text-xl text-gray-500 mt-4">(Ganze Pizza)</p>
    </div>
);

const Slide2 = () => {
    const [cut, setCut] = useState(false);
    return (
        <div className="flex flex-col items-center justify-center h-full text-center space-y-8 animate-fade-in">
            <h2 className="text-4xl font-bold text-gray-800">Das Problem: Teilen</h2>
            <p className="text-2xl">Wir haben <span className="font-bold">1</span> Pizza, aber <span className="font-bold">2</span> Personen.</p>
            <div className="flex items-center gap-8">
                <div className="transition-all duration-700 transform">
                    <Pizza slices={cut ? 2 : 1} activeIndices={cut ? [0, 1] : [0]} />
                </div>
            </div>
            <button onClick={() => setCut(true)} className={btnPrimaryClass}>
                {cut ? "Pizza ist geteilt!" : "Pizza durchschneiden ‚úÇÔ∏è"}
            </button>
            {cut && <p className="text-3xl font-bold text-green-600 animate-pop mt-4">Jeder bekommt eine H√ÑLFTE.</p>}
        </div>
    );
};

const Slide3 = () => {
    const [step, setStep] = useState(0);
    return (
        <div className="flex flex-col items-center h-full pt-10 text-center animate-fade-in">
            <h2 className="text-4xl font-bold mb-8">Wie schreiben wir das?</h2>
            <div className="flex items-center justify-center gap-12">
                <Pizza slices={2} activeIndices={[0]} />
                <div className="text-8xl font-bold flex items-center">=</div>
                <div className="relative">
                    <div className="fraction text-9xl">
                        <span className={`top transition-colors duration-500 ${step >= 2 ? 'text-red-500' : ''}`}>1</span>
                        <span className={`bottom transition-colors duration-500 ${step >= 1 ? 'text-blue-500' : ''}`}>2</span>
                    </div>
                    {step >= 1 && (
                        <div className="absolute top-28 -right-48 text-left w-64 animate-pop">
                            <div className="text-blue-600 text-3xl font-bold handwritten flex items-center">‚Üê Nenner</div>
                            <div className="text-gray-500 text-xl">Nennt den Namen<br/>(in wie viele Teile geteilt?)</div>
                        </div>
                    )}
                    {step >= 2 && (
                        <div className="absolute -top-16 -right-48 text-left w-64 animate-pop">
                            <div className="text-red-600 text-3xl font-bold handwritten flex items-center">‚Üê Z√§hler</div>
                            <div className="text-gray-500 text-xl">Z√§hlt die St√ºcke<br/>(wie viele habe ich?)</div>
                        </div>
                    )}
                </div>
            </div>
            <div className="mt-12 flex gap-4">
                <button onClick={() => setStep(1)} disabled={step>=1} className={btnPrimaryClass}>1. Was steht unten?</button>
                <button onClick={() => setStep(2)} disabled={step>=2} className={btnSecondaryClass}>2. Was steht oben?</button>
            </div>
        </div>
    );
};

const Slide4 = () => {
    const [denom, setDenom] = useState(4);
    return (
        <div className="flex flex-col items-center h-full pt-8 animate-fade-in">
            <h2 className="text-4xl font-bold text-blue-600 mb-2">Der Nenner (Unten)</h2>
            <p className="text-2xl mb-8">In wie viele Teile wurde die Pizza <span className="font-bold underline">insgesamt</span> geschnitten?</p>
            <div className="flex gap-12 items-center">
                <Pizza slices={denom} activeIndices={[]} />
                <div className="fraction text-8xl text-gray-300">
                    <span className="top">?</span>
                    <span className="bottom text-blue-600">{denom}</span>
                </div>
            </div>
            <div className="flex gap-4 mt-8">
                {[3, 4, 5, 6, 8].map(d => (
                    <button key={d} onClick={() => setDenom(d)} className={`w-16 h-16 rounded-full text-2xl font-bold border-4 transition-all ${denom === d ? 'bg-blue-600 text-white border-blue-600 scale-110' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'}`}>{d}</button>
                ))}
            </div>
            <p className="mt-4 text-xl italic text-gray-500">Der Nenner bestimmt die Gr√∂√üe der St√ºcke!</p>
        </div>
    );
};

const Slide5 = () => {
    const [count, setCount] = useState(1);
    const total = 6;
    return (
        <div className="flex flex-col items-center h-full pt-8 animate-fade-in">
            <h2 className="text-4xl font-bold text-red-600 mb-2">Der Z√§hler (Oben)</h2>
            <p className="text-2xl mb-8">Wie viele St√ºcke <span className="font-bold underline">essen</span> wir?</p>
            <div className="flex gap-12 items-center">
                <Pizza slices={total} activeIndices={Array.from({length: count}, (_, i) => i)} />
                <div className="fraction text-8xl">
                    <span className="top text-red-600 transition-all">{count}</span>
                    <span className="bottom text-gray-400">{total}</span>
                </div>
            </div>
            <div className="flex items-center gap-6 mt-8 p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                <button onClick={() => setCount(Math.max(0, count-1))} className="w-12 h-12 bg-gray-100 hover:bg-gray-200 rounded-full text-2xl font-bold">-</button>
                <span className="text-3xl font-bold w-12 text-center">{count}</span>
                <button onClick={() => setCount(Math.min(total, count+1))} className="w-12 h-12 bg-green-100 hover:bg-green-200 rounded-full text-2xl font-bold">+</button>
            </div>
        </div>
    );
};

// --- SLIDE 6: Random Generator (Visual -> Number) ---
const Slide6 = () => {
    const generatePuzzle = () => {
        const d = Math.floor(Math.random() * 7) + 3; // Denominator 3 to 9
        const n = Math.floor(Math.random() * (d - 1)) + 1; // Numerator 1 to d-1
        return { num: n, den: d };
    };

    const [puzzle, setPuzzle] = useState(generatePuzzle()); 
    const [inputNum, setInputNum] = useState('');
    const [inputDen, setInputDen] = useState('');
    const [status, setStatus] = useState('unsolved'); // unsolved, correct, incorrect

    const check = () => {
        if (parseInt(inputNum) === puzzle.num && parseInt(inputDen) === puzzle.den) {
            setStatus('correct');
        } else {
            setStatus('incorrect');
        }
    };

    const nextTask = () => {
        setPuzzle(generatePuzzle());
        setInputNum('');
        setInputDen('');
        setStatus('unsolved');
    };

    return (
        <div className="flex flex-col items-center h-full pt-6 animate-fade-in">
            <h2 className="text-3xl font-bold mb-4">√úbung: Wie hei√üt der Bruch?</h2>
            
            <div className="flex gap-16 items-center mb-8 bg-white p-8 rounded-3xl shadow-lg border border-gray-100 transition-all hover:shadow-xl">
                <div className="">
                    <Pizza slices={puzzle.den} activeIndices={Array.from({length: puzzle.num}, (_, i) => i)} />
                </div>
                
                <div className="flex flex-col items-center gap-2">
                    <input 
                        type="number" 
                        value={inputNum}
                        onChange={(e) => setInputNum(e.target.value)}
                        className={`w-24 h-24 text-center text-4xl font-bold border-4 rounded-xl outline-none focus:border-blue-400 transition-colors ${status === 'correct' ? 'border-green-500 bg-green-50' : 'border-gray-300'}`}
                        placeholder="?"
                    />
                    <div className="w-32 h-2 bg-black rounded"></div>
                    <input 
                        type="number" 
                        value={inputDen}
                        onChange={(e) => setInputDen(e.target.value)}
                        className={`w-24 h-24 text-center text-4xl font-bold border-4 rounded-xl outline-none focus:border-blue-400 transition-colors ${status === 'correct' ? 'border-green-500 bg-green-50' : 'border-gray-300'}`}
                        placeholder="?"
                    />
                </div>
            </div>

            <div className="flex gap-4 h-16 items-center">
                {status !== 'correct' && (
                    <button onClick={check} className={btnPrimaryClass}>
                        <Check size={24} /> Pr√ºfen
                    </button>
                )}
                {status === 'correct' && (
                    <button onClick={nextTask} className={`${btnPrimaryClass} bg-green-600 hover:bg-green-700 animate-pop`}>
                        <RotateCcw size={24} /> N√§chste Aufgabe
                    </button>
                )}
            </div>
            
            <div className="h-8 mt-2">
                {status === 'incorrect' && <p className="text-red-500 font-bold text-xl animate-pop">Nicht ganz. Versuch es noch einmal!</p>}
                {status === 'correct' && <p className="text-green-600 font-bold text-xl animate-pop">Richtig! Super!</p>}
            </div>
        </div>
    );
};

// --- SLIDE 7: Random Generator (Number -> Visual) ---
const Slide7 = () => {
    const generateTarget = () => {
        const d = Math.floor(Math.random() * 6) + 3; // Denominator 3 to 8
        const n = Math.floor(Math.random() * (d - 1)) + 1; // Numerator 1 to d-1
        return { num: n, den: d };
    };

    const [target, setTarget] = useState(generateTarget());
    const [selected, setSelected] = useState([]);
    const [status, setStatus] = useState('unsolved'); // unsolved, correct, incorrect

    const toggleSlice = (index) => {
        if (status === 'correct') return; // Lock if correct
        if (selected.includes(index)) {
            setSelected(selected.filter(i => i !== index));
        } else {
            setSelected([...selected, index]);
        }
        setStatus('unsolved'); // Reset status on edit
    };

    const check = () => {
        if (selected.length === target.num) {
            setStatus('correct');
        } else {
            setStatus('incorrect');
        }
    };

    const nextTask = () => {
        setTarget(generateTarget());
        setSelected([]);
        setStatus('unsolved');
    };

    return (
        <div className="flex flex-col items-center h-full pt-6 animate-fade-in">
            <h2 className="text-3xl font-bold mb-2">√úbung: Male die Pizza an!</h2>
            <p className="text-xl mb-6 text-gray-600">Markiere <span className="font-bold text-blue-600">{target.num} von {target.den}</span> St√ºcken.</p>
            
            <div className="flex gap-16 items-center mb-8 bg-white p-8 rounded-3xl shadow-lg border border-gray-100 transition-all hover:shadow-xl">
                <div className="transform scale-125">
                    <Fraction num={target.num} den={target.den} />
                </div>
                <div className="text-6xl text-gray-300">‚Üí</div>
                <div className="cursor-pointer">
                    <Pizza 
                        slices={target.den} 
                        activeIndices={selected} 
                        interactive={status !== 'correct'}
                        onClickSlice={toggleSlice}
                        highlightColor="#EF4444"
                    />
                </div>
            </div>

            <div className="flex gap-4 h-16 items-center">
                 {status !== 'correct' && (
                    <button onClick={check} className={btnPrimaryClass}>
                        <Check size={24} /> Fertig?
                    </button>
                 )}
                 {status === 'correct' && (
                    <button onClick={nextTask} className={`${btnPrimaryClass} bg-green-600 hover:bg-green-700 animate-pop`}>
                        <RotateCcw size={24} /> N√§chste Aufgabe
                    </button>
                )}
            </div>
            
            <div className="h-8 mt-2">
                {status === 'incorrect' && (
                    <p className="text-red-500 font-bold text-xl animate-pop">
                        Das sind {selected.length} St√ºcke. Wir brauchen {target.num}!
                    </p>
                )}
                {status === 'correct' && (
                    <p className="text-green-600 font-bold text-xl animate-pop">Richtig! Das sind {target.num} {target.den}-tel.</p>
                )}
            </div>
        </div>
    );
};

const Slide8 = () => {
    const total = 4;
    const [filled, setFilled] = useState(0);
    return (
        <div className="flex flex-col items-center h-full pt-6 animate-fade-in">
            <h2 className="text-3xl font-bold mb-4">Nicht nur Pizza!</h2>
            <p className="text-xl mb-8">Es funktioniert auch mit Schokolade (Rechtecke).</p>
            <div className="flex gap-12 items-center">
                <div className="grid grid-cols-4 w-96 h-24 border-4 border-amber-900 bg-amber-100 rounded overflow-hidden shadow-lg">
                    {[...Array(total)].map((_, i) => (
                        <div key={i} onClick={() => setFilled(i + 1)} className={`border-r border-amber-900 cursor-pointer hover:opacity-80 transition-colors ${i < filled ? 'bg-amber-700' : 'bg-transparent'}`}></div>
                    ))}
                </div>
                <div className="fraction text-8xl">
                    <span className="top text-amber-800">{filled}</span>
                    <span className="bottom">{total}</span>
                </div>
            </div>
            <p className="mt-4 text-gray-500">Klicke in den Schokoriegel!</p>
        </div>
    );
};

const Slide9 = () => {
    const [choice, setChoice] = useState(null);
    const correct = 'right';
    return (
        <div className="flex flex-col items-center h-full pt-6 animate-fade-in">
            <h2 className="text-3xl font-bold mb-8">Wer hat mehr gegessen?</h2>
            <div className="flex items-center gap-20">
                <div onClick={() => setChoice('left')} className={`p-6 rounded-2xl cursor-pointer transition-all border-4 ${choice === 'left' ? 'border-blue-500 shadow-xl scale-105' : 'border-transparent hover:bg-white'}`}>
                    <div className="flex flex-col items-center gap-4">
                        <Pizza slices={4} activeIndices={[0]} />
                        <Fraction num={1} den={4} scale={1.5} />
                    </div>
                </div>
                <div className="text-5xl font-bold text-gray-400">vs</div>
                <div onClick={() => setChoice('right')} className={`p-6 rounded-2xl cursor-pointer transition-all border-4 ${choice === 'right' ? 'border-blue-500 shadow-xl scale-105' : 'border-transparent hover:bg-white'}`}>
                    <div className="flex flex-col items-center gap-4">
                        <Pizza slices={4} activeIndices={[0,1,2]} />
                        <Fraction num={3} den={4} scale={1.5} />
                    </div>
                </div>
            </div>
            <div className="mt-8 h-16">
                {choice && (
                    <div className={`text-2xl font-bold px-8 py-2 rounded-full text-white ${choice === correct ? 'bg-green-500 animate-pop' : 'bg-red-500'}`}>
                        {choice === correct ? "Richtig! 3 St√ºcke sind mehr als 1 St√ºck." : "Schau nochmal genau hin!"}
                    </div>
                )}
            </div>
        </div>
    );
};

const Slide10 = () => {
    // Options for labels
    const options = ["???", "Z√§hler", "Nenner", "Bruchstrich"];
    
    // State for the 3 label positions: [Top, Mid, Bot] - store index of options
    const [labels, setLabels] = useState([0, 0, 0]);
    
    // State for the concept question
    const conceptOptions = ["???", "Der Z√§hler", "Der Nenner"];
    const [conceptAns, setConceptAns] = useState(0);

    const [status, setStatus] = useState(null);

    // Cycle label at index i
    const cycleLabel = (i) => {
        const newLabels = [...labels];
        newLabels[i] = (newLabels[i] + 1) % options.length;
        setLabels(newLabels);
        setStatus(null);
    };

    const cycleConcept = () => {
        setConceptAns((conceptAns + 1) % conceptOptions.length);
        setStatus(null);
    };

    const check = () => {
        // Expected: Top=Z√§hler(1), Mid=Bruchstrich(3), Bot=Nenner(2)
        // Concept: "Der Z√§hler"(1) counts parts
        const isLabelsCorrect = labels[0] === 1 && labels[1] === 3 && labels[2] === 2;
        const isConceptCorrect = conceptAns === 1; // "Der Z√§hler" counts parts

        if (isLabelsCorrect && isConceptCorrect) {
            setStatus('correct');
        } else {
            setStatus('incorrect');
        }
    };

    return (
        <div className="flex flex-col items-center h-full pt-6">
            <h2 className="text-3xl font-bold mb-4">Profi-Check: Kennst du dich aus?</h2>
            <p className="text-lg text-gray-500 mb-6">Klicke auf die Boxen, bis der richtige Begriff erscheint.</p>
            
            <div className="flex gap-16 justify-center items-center w-full max-w-4xl">
                {/* Visual Fraction Area */}
                <div className="flex items-center gap-4 bg-white p-8 rounded-3xl shadow-lg border border-gray-100">
                    <div className="fraction text-9xl">
                        <span className="top">4</span>
                        <span className="bottom">7</span>
                    </div>
                    
                    {/* Interactive Labels */}
                    <div className="flex flex-col gap-2 h-64 justify-between py-4">
                        {/* Top Label */}
                        <div className="flex items-center gap-2">
                            <span className="text-3xl text-gray-400">‚Üê</span>
                            <button 
                                onClick={() => cycleLabel(0)}
                                className={`w-48 py-2 rounded-lg font-bold text-xl border-2 transition-all cursor-pointer hover:opacity-80 ${labels[0]===0 ? 'bg-gray-100 text-gray-400 border-dashed' : 'bg-blue-50 text-blue-700 border-blue-200 shadow-sm'}`}
                            >
                                {options[labels[0]]}
                            </button>
                        </div>

                        {/* Mid Label */}
                        <div className="flex items-center gap-2">
                            <span className="text-3xl text-gray-400">‚Üê</span>
                            <button 
                                onClick={() => cycleLabel(1)}
                                className={`w-48 py-2 rounded-lg font-bold text-xl border-2 transition-all cursor-pointer hover:opacity-80 ${labels[1]===0 ? 'bg-gray-100 text-gray-400 border-dashed' : 'bg-blue-50 text-blue-700 border-blue-200 shadow-sm'}`}
                            >
                                {options[labels[1]]}
                            </button>
                        </div>

                        {/* Bot Label */}
                        <div className="flex items-center gap-2">
                            <span className="text-3xl text-gray-400">‚Üê</span>
                            <button 
                                onClick={() => cycleLabel(2)}
                                className={`w-48 py-2 rounded-lg font-bold text-xl border-2 transition-all cursor-pointer hover:opacity-80 ${labels[2]===0 ? 'bg-gray-100 text-gray-400 border-dashed' : 'bg-blue-50 text-blue-700 border-blue-200 shadow-sm'}`}
                            >
                                {options[labels[2]]}
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            {/* Concept Question */}
            <div className="mt-8 flex items-center gap-3 bg-blue-50 p-4 rounded-xl border border-blue-100">
                <span className="text-xl">Wer sagt mir, wie viele St√ºcke ich esse?</span>
                <button 
                    onClick={cycleConcept}
                    className="bg-white px-6 py-2 rounded-lg font-bold text-xl border-2 border-blue-300 shadow-sm text-blue-800 min-w-[150px] cursor-pointer hover:bg-blue-50 transition-colors"
                >
                    {conceptOptions[conceptAns]}
                </button>
            </div>

            <div className="mt-8 flex flex-col items-center h-20">
                <button onClick={check} className={btnPrimaryClass}>
                    <Check size={24} /> Alles richtig?
                </button>
                {status === 'correct' && <p className="text-green-600 font-bold text-xl mt-2 animate-pop">Perfekt! Du bist ein Bruch-Profi! üéì</p>}
                {status === 'incorrect' && <p className="text-red-500 font-bold text-xl mt-2 animate-pop">Noch nicht ganz. Schau nochmal genau hin!</p>}
            </div>
        </div>
    );
};

// --- MAIN APP ---
export default function App() {
    const [slide, setSlide] = useState(1);
    const totalSlides = 10;

    const nextSlide = () => { if (slide < totalSlides) setSlide(s => s + 1); };
    const prevSlide = () => { if (slide > 1) setSlide(s => s - 1); };

    // Scroll to top when slide changes
    useEffect(() => {
        const contentArea = document.getElementById('slide-content');
        if (contentArea) contentArea.scrollTop = 0;
    }, [slide]);

    const renderSlide = () => {
        switch(slide) {
            case 1: return <Slide1 />;
            case 2: return <Slide2 />;
            case 3: return <Slide3 />;
            case 4: return <Slide4 />;
            case 5: return <Slide5 />;
            case 6: return <Slide6 />;
            case 7: return <Slide7 />;
            case 8: return <Slide8 />;
            case 9: return <Slide9 />;
            case 10: return <Slide10 />;
            default: return <Slide1 />;
        }
    };

    return (
        <div className="flex flex-col h-screen max-w-5xl mx-auto bg-white shadow-2xl overflow-hidden relative font-sans text-gray-900">
            <GlobalStyles />
            {/* Progress Bar */}
            <div className="w-full bg-gray-200 h-2">
                <div className="bg-blue-500 h-2 transition-all duration-300" style={{ width: `${(slide / totalSlides) * 100}%` }}></div>
            </div>
            {/* Header */}
            <div className="p-4 flex justify-between items-center bg-blue-50 border-b select-none">
                <span className="text-gray-500 font-bold">Mathe Klasse 6</span>
                <div className="text-xl font-bold text-blue-800">Folie {slide} / {totalSlides}</div>
            </div>
            {/* Main Content */}
            <div id="slide-content" className="flex-grow p-4 relative overflow-y-auto">
                {renderSlide()}
            </div>
            {/* Footer */}
            <div className="p-4 bg-gray-50 border-t flex justify-between items-center select-none">
                <button onClick={prevSlide} disabled={slide === 1} className={`flex items-center px-6 py-3 rounded-lg font-bold text-lg transition-colors ${slide === 1 ? 'text-gray-300 cursor-not-allowed' : 'bg-white text-gray-700 hover:bg-gray-100 shadow border'}`}>‚Üê Zur√ºck</button>
                <div className="flex gap-2">
                    {Array.from({length: totalSlides}).map((_, i) => (
                        <button key={i} onClick={() => setSlide(i+1)} className={`w-3 h-3 rounded-full transition-colors ${slide === i+1 ? 'bg-blue-600' : 'bg-gray-300 hover:bg-gray-400'}`} />
                    ))}
                </div>
                <button onClick={nextSlide} disabled={slide === totalSlides} className={`flex items-center px-6 py-3 rounded-lg font-bold text-lg transition-colors ${slide === totalSlides ? 'text-gray-300 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700 shadow-lg'}`}>
                    Weiter <ArrowRight size={24} className="ml-2"/>
                </button>
            </div>
        </div>
    );
};
